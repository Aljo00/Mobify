<%- include('../../views/layout/header.ejs') %>

<!-- Bootstrap CSS -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<!-- Font Awesome -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
/>
<!-- Custom CSS -->
<link rel="stylesheet" href="/styles/user/checkOut.css" />

<div class="checkout-container">
  <div class="row">
    <div class="col-md-8">
      <div class="checkout-header">
        <h1>Checkout</h1>
      </div>
      <form
        class="checkout-form"
        action="/place-order"
        method="post"
        id="checkoutForm"
      >
        <!-- Step 1: Address Section -->
        <div id="addressSection" class="section">
          <h2>Shipping Address</h2>
          <% addresses.forEach((address, index) => { %> <%
          address.address.forEach((addr, addrIndex) => { %>
          <div class="col-md-12 mb-4">
            <div class="card address-card hover-effect">
              <div class="card-body">
                <input type="radio" id="address<%= index %>-<%= addrIndex %>"
                name="selectedAddress" value="<%= addr._id %>" <%= index === 0 &&
                addrIndex === 0 ? 'checked' : '' %>>
                <label for="address<%= index %>-<%= addrIndex %>">
                  <h5 class="card-title">
                    <%= addr.houseName %> (<%= addr.addressType %>)
                  </h5>
                  <p class="card-text">
                    <%= addr.city %>, <%= addr.state %> - <%= addr.pincode %>
                  </p>
                  <p class="card-text">Landmark: <%= addr.landMark %></p>
                  <p class="card-text">Phone: <%= addr.phone %></p>
                  <p class="card-text">Alt Phone: <%= addr.altPhone %></p>
                </label>
              </div>
            </div>
          </div>
          <% }) %> <% }) %>
        </div>

        <!-- Step 2: Payment Options Section -->
        <div id="paymentOptions" class="section">
          <h2>Payment Options</h2>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="paymentMethod"
              id="cod"
              value="cod"
              checked
            />
            <label class="form-check-label" for="cod">
              <i class="fas fa-money-bill-wave"></i> Cash on Delivery (COD)
            </label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="paymentMethod"
              id="razorpay"
              value="razorpay"
            />
            <label class="form-check-label" for="razorpay">
              <i class="fas fa-credit-card"></i> Razorpay
            </label>
          </div>
        </div>
    </div>

    <!-- Cart Summary Section -->
    <div class="col-md-4">
      <div class="cart-summary">
        <h2>Cart Summary</h2>
        <p>Items: <%= cart.items.length %></p>
        <p>Total: $<%= totalPrice %></p>
        <button class="btn btn-primary" type="submit">Place Order</button>
      </div>
    </div>
    </form>
  </div>
</div>

<%- include('../../views/layout/footer.ejs') %>
